<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Alcaide</title>
  <link rel="stylesheet" href="css/bootstrapmuro.css">
  <link rel="stylesheet" href="css/disseny.css">

<!-- Favicon -->
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <script type="text/javascript">
      function ss(x,i){
        var canvas = document.getElementById(x);
        var celda = canvas.getContext("2d");
        celda.font="100px quicksand";
        celda.fillText(i,110,110);
        celda.textAlign="center";
      }

    function escribir(){
      var celdas = ["myCanvas0","myCanvas1","myCanvas2","myCanvas3","myCanvas4","myCanvas5","myCanvas6","myCanvas7","myCanvas8","myCanvas9","myCanvas10","myCanvas11","myCanvas12","myCanvas13","myCanvas14","myCanvas15","myCanvas16","myCanvas17","myCanvas18","myCanvas19","myCanvas20","myCanvas21","myCanvas22","myCanvas23","myCanvas24","myCanvas25","myCanvas26","myCanvas27","myCanvas28","myCanvas29"];
      var x = 0;
      celdas.forEach(function(i){  
        ss(i,x);
        x++
      });
    }

</script>

  </head>

<body onLoad="escribir();">

  <div class="container-fluid" style="height:100%; background-color: #b2dfdb">
    <div class="row" style="padding:0px">
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" height:100%; padding:0px; background-color:#80cbc4;">

      <div style="position:fixed;width:22%">
      <img src="images/logo.PNG" alt="..." class="img-rounded" style="width:90%; margin-bottom:6%;margin-top:2%;margin-left:10%;margin-top:12%">

    <div class="jumbotron" style="background-color:#80cbc4; padding:10px;margin:5px;">
    <h4 style="padding:5px;padding-top:7px;text-align:center;margin-left:10%;">Treballadors en actiu</h4>



      <div class="panel panel-warning"  id="barraesquerra" style="height:430px;width:82%;margin:5%;margin-top:0%; margin-bottom:3%; margin-left:15%; background-color:#b2dfdb ">
        <table class="table table-fixed">
          <tbody id="treballadoris" style="font-size:12px;">
          <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr style="background-color:#ff5722;">
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>
            <tr>
              <td class="col-xs-10"><a href="afegirresident.html"><h7>Mike Adams</h7></a></td><td class="col-xs-2">Actiu</td>
            </tr>

          </tbody>
        </table>
      </div>
      </div>


    </div>
    </div>


      <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9" style= "padding-left:10px; padding-top: 10;height:100%;">

<div id="misat" class="jumbotron" style=" background-color:#b2dfdb; padding:1%; padding-top: 1%;  margin-bottom:3%;margin-top:5%;">
        
  <div id="nis" class="panel panel-info" style=" padding-bottom:2%; margin-bottom:0%;background-color:#e0f2f1;">

      <div class="panel-heading">CONTROL DE LES CEL·LES</div>
      <div id="lastcaida" class="panel-body">

      <div class="row" style="padding-top:2%">
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
        <div>

<canvas id="myCanvas0" class="puertacerrada" onclick="gestioceldas(0)"></canvas></div>
      </div>
<div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas1" class="puertacerrada" onclick="gestioceldas(1)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas2" class="puertacerrada" onclick="gestioceldas(2)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas3" class="puertaabierta" onclick="gestioceldas(3)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas4" class="puertacerrada" onclick="gestioceldas(4)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas5" class="puertacerrada" onclick="gestioceldas(5)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas6" class="puertacerrada" onclick="gestioceldas(6)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas7" class="puertaabierta" onclick="gestioceldas(7)">></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas8" class="puertaabierta" onclick="gestioceldas(8)">></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas9" class="puertaabierta" onclick="gestioceldas(9)">></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas10" class="puertacerrada" onclick="gestioceldas(10)">></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas11" class="puertaabierta" onclick="gestioceldas(11)">></canvas>
      </div>
  	</div>


  	<div class="row" style="padding-top:2%">
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas12" class="puertacerrada" onclick="gestioceldas(12)"></canvas>
      </div>
      <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
      <div id="numcelda">
      </div>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas13" class="puertacerrada" onclick="gestioceldas(13)"></canvas>
      </div>
    </div>

    <div class="row" style="padding-top:2%">
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas14" class="puertacerrada" onclick="gestioceldas(14)"></canvas>
      </div>
      <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
        <div id="numsector">
        <h2 class="titol" id="DadesPersonals" style="margin:0px;">Cel·les del sector X</h2></div>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas15" class="puertacerrada" onclick="gestioceldas(15)"></canvas>
      </div>
    </div>

    <div class="row" style="padding-top:2%">
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas16" class="puertacerrada" onclick="gestioceldas(16)"></canvas>
      </div>
      <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
        <div id="dispositius">
        </div>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas17" class="puertaabierta" onclick="gestioceldas(17)"></canvas>
      </div>
    </div>



<div class="row" style="padding-top:2%">
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas18" class="puertacerrada" onclick="gestioceldas(18)"></canvas>
      </div>
<div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas19" class="puertaabierta" onclick="gestioceldas(19)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas20" class="puertaabierta" onclick="gestioceldas(20)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas21" class="puertaabierta" onclick="gestioceldas(21)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas22" class="puertacerrada" onclick="gestioceldas(22)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas23" class="puertaabierta" onclick="gestioceldas(23)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas24" class="puertacerrada" onclick="gestioceldas(24)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas25" class="puertacerrada" onclick="gestioceldas(25)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas26" class="puertacerrada" onclick="gestioceldas(26)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas27" class="puertacerrada" onclick="gestioceldas(27)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
<canvas id="myCanvas28" class="puertacerrada" onclick="gestioceldas(28)"></canvas>
      </div>
      <div class="col-lg-1  col-md-1 col-sm-1 col-xs-1">
        <div>
<canvas id="myCanvas29" class="puertacerrada" onclick="gestioceldas(29)"></canvas></div>
      </div>
  	</div>
      </div>
    </div>
     </div>



     <div class="jumbotron" style=" background-color:#b2dfdb; padding:0%; padding-top: 1%;  margin-bottom:3%;margin-top:0%;">
        
  <div id="luz" class="panel panel-info" style=" padding-bottom:0%; margin-bottom:0%;background-color:#e0f2f1;">

     <div class="panel-heading">ILUMINACIÓ GENERAL</div>
      <div class="panel-body">
        <label class="switch">
  <input type="checkbox">
  <div class="slider round"></div>
</label> <h3 class="titol" style="width:70%;float:right;margin-top:0%;">Encén/apaga les llums de tot el sector</h3>
      </div>
    </div>
  </div>
</div> </div>



      </div>
    
  
  <script>
    function gestioceldas(n){
      document.getElementById("numcelda").innerHTML = "<h3 class='titol'> Cel·la número "+ String(n) + " del sector número 3</h3>";
      document.getElementById("numsector").innerHTML = "<h4 class='titol' style='margin-top:0px;'> Aquesta cel·la la ocupa el pres "+ "PRESO" + ". Llums XXXX / Porta XXXX</h4>";
     document.getElementById("dispositius").innerHTML = "<div class='row'><div class='col-lg-2 col-md-2 col-sm-2 col-xs-2'></div><div class='col-lg-4 col-md-4 col-sm-4 col-xs-4'><button class='button' onclick='llum("+n+")'>ENCEN La Llum</button></div><div class='col-lg-6 col-md-6 col-sm-6 col-xs-6'><button class='button' onclick='porta("+n+")'>TANCA La Porta</button></div></div>";
    }
    function color(x) {
      obj = document.getElementById(x);
      obj.style.backgroundColor = '#FFFFFF';
    }

    function llum(n){
      alert("¡Has encés/apagat la llum de la cel·la "+String(n)+"!");
    }

    function porta(n){
      alert("¡Has obert/tancat la porta de la cel·la "+String(n)+"!");
    }

    function neteja(){
       document.getElementById("numcelda").innerHTML = "";
       document.getElementById("numsector").innerHTML = "<h2 class='titol' id='DadesPersonals' style='margin:0px;'>Cel·les del sector X</h2></div>";
       document.getElementById("dispositius").innerHTML = "";
    }




     $(document).on("click",function(e) {
                    
         var container = $("#misat");
                            
            if (!container.is(e.target) && container.has(e.target).length === 0) { 
               neteja();               
            }
     });


/*
    function leer() {
    

    var xmlhttp = new XMLHttpRequest();
    var url = "http://127.0.0.1:8000/todo";
    xmlhttp.onreadystatechange=
    function() {
    if (this.readyState == 4 && this.status == 200){
    var my = this.response;
    myFunction(my);
    mycaida(my);
    }
    };
    xmlhttp.open("GET", url);
    xmlhttp.responseType= "json";
    xmlhttp.send();
    }

    

    function myFunction(myObj) {


div='';
    for (var z=0;z<(myObj.Trabajadores.length);z++){
		     div+="<tr style='";
		     div+=";width:100%;'>";
		     div+="<td class='";
		     div+="col-xs-10\'";
		     div+=">";
		     div+=myObj.Trabajadores[z].name;
		     div+=" ";
		     div+=myObj.Trabajadores[z].apellido;
		     div+="</td><td class='";
		     div+="col-xs-2\'";
		     div+=">"
		     div+=myObj.Trabajadores[z].ocupado;
		     div+="</td></tr>";
    




	     }
        document.getElementById("treballadoris").innerHTML=div;

		     }

		     function mycaida(myObj) {
		     div='';
                     if((myObj.Caidas.length)>0){



   	 document.getElementById("misat").innerHTML= "<div id='nis' class='panel panel-info' style=' padding-bottom:4%; margin-bottom:0%;background-color:#e0f2f1';><div class='panel-heading'>ATENCION CAÍDA REGISTRADA</div><div id='lastcaida' class='panel-body'>Última caída registrada: Julia Ventura , habitacion 105</div></div>";
		     document.getElementById("nis").className= "panel panel-danger";

}
			else{
		     document.getElementById("nis").className = "panel panel-info";
   	 document.getElementById("misat").innerHTML=div;
			}


		     div='';
		     var abuelo=myObj.Caidas[0];
		     div+="Ultima Caiguda Registrada: ";
		     div+=abuelo.name;
		     div+=" ";
		     div+=abuelo.apellido;
		     div+=", Localización : ";
		     div+=abuelo.lugar_caida;
    
    document.getElementById("lastcaida").innerHTML=div;



	     
    

    }

    
    
 	*/
      </script>

</body>

</html>
